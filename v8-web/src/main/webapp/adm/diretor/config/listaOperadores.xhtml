<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml"
                xmlns:oz="http://xmlns.jcp.org/jsf/composite/ozelo/componentes"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    
    <ui:define name="content">

            <div class="Container100">
            <div class="ContainerIndent">
                <div class="Card ShadowEffect  ">
                    <div class="Container96">
                        <div class="ContainerIndent">
                            <h2 class="BigTopic">Operadores Cadastrados</h2>
                          <p:growl id="growl" showDetail="true" sticky="true" /> 
            <p:tabView >
        <p:tab title="Ativos">
            <p:dataTable id="operadorDT" var="operador" value="#{operadorMB.operadoresAtivos}" class="semBorda"
                         selectionMode="single" resizableColumns="true" selection="#{operadorMB.operadorView}" rowKey="#{operador.id}" >
                <p:ajax event="rowSelect" process="operadorDT" update=":form:cadastroDetalhes" oncomplete="PF('dlgCadastro').show();"/>
        <p:column headerText="Id" style="text-align: right" width="3%">
            <h:outputText value="#{operador.id}" /></p:column>
                 <p:column  headerText="Apelido" width="18%">
                     <h:outputText value="#{operador.apelido}" /></p:column>
                 <p:column headerText="Nome" width="45%">
            <h:outputText value="#{operador.nome}" /></p:column>
                 <p:column headerText="Função" width="10%">
            <h:outputText value="#{operador.funcao}" /></p:column>
                 <p:column headerText="Nv." style="text-align: center" width="2%">
            <h:outputText value="#{operador.nivel}" /></p:column>
                 <p:column headerText="Aces." style="text-align: right" width="4%" >
            <h:outputText value="#{operador.nrAcessos}" /></p:column>
                 <p:column headerText="Último Acesso" width="10%">
                  <h:outputText value="#{operador.dtUltAcesso}" >
                     <f:convertDateTime pattern="dd/MM/yyyy HH:mm" /></h:outputText></p:column>
    </p:dataTable>
         </p:tab>
            <p:tab title="Inativos">
                <p:dataTable id="inativosDT" var="operador" value="#{operadorMB.operadoresInativos}" class="semBorda" emptyMessage="Sem Operadores Listados"
                         selectionMode="single" resizableColumns="true" selection="#{operadorMB.operadorView}" rowKey="#{operador.id}" >
                <p:ajax event="rowSelect" process="inativosDT" update=":form:cadastroDetalhes" oncomplete="PF('dlgCadastro').show();"/>
        <p:column headerText="Id" style="text-align: right" width="3%">
            <h:outputText value="#{operador.id}" /></p:column>
                 <p:column headerText="Apelido" width="18%">
            <h:outputText value="#{operador.apelido}" /></p:column>
                 <p:column headerText="Nome" width="45%">
            <h:outputText value="#{operador.nome}" /></p:column>
                 <p:column headerText="Função" width="10%">
            <h:outputText value="#{operador.funcao}" /></p:column>
                 <p:column headerText="Nv." style="text-align: center" width="2%">
            <h:outputText value="#{operador.nivel}" /></p:column>
                 <p:column headerText="Data Desativação" width="10%">
                     <h:outputText value="#{operador.dtDesativacao}" >
                     <f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText></p:column>
    </p:dataTable>  
    </p:tab>
                <p:tab title="Demitidos">
                <p:dataTable id="demitidosDT" var="operador" value="#{operadorMB.operadoresInativos}" class="semBorda" emptyMessage="Sem Operadores Listados"
                         selectionMode="single" resizableColumns="true" selection="#{operadorMB.operadorView}" rowKey="#{operador.id}" >
                <p:ajax event="rowSelect" process="demitidosDT" update=":form:cadastroDetalhes" oncomplete="PF('dlgCadastro').show();"/>
        <p:column headerText="Id" style="text-align: right" width="3%">
            <h:outputText value="#{operador.id}" /></p:column>
                 <p:column headerText="Apelido" width="18%">
            <h:outputText value="#{operador.apelido}" /></p:column>
                 <p:column headerText="Nome" width="45%">
            <h:outputText value="#{operador.nome}" /></p:column>
                 <p:column headerText="Função" width="10%">
            <h:outputText value="#{operador.funcao}" /></p:column>
             <p:column headerText="Data Admissão" width="10%">
                 <h:outputText value="#{operador.dtAdmissao}" >
                     <f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText></p:column>
                 <p:column headerText="Data Demissão" width="10%">
                     <h:outputText value="#{operador.dtDesativacao}" >
                     <f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText></p:column>
    </p:dataTable>  
    </p:tab>
            </p:tabView>                
                          <p:commandButton icon="fa fa-plus-circle Fs16 White" style="float: left" styleClass="Fright" value="Novo Operador" action="#{operadorMB.doNovoOperador()}" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <p:dialog widgetVar="dlgCadastro" modal="true" resizable="false">
            <p:panel id="cadastroDetalhes" class="semBorda">
            <p:panelGrid columns="3" layout="grid" class="semBorda">
            <p:outputLabel value="Id.:" class="formLabel" />
            <p:outputLabel value="Apelido:" class="formLabel" />
            &nbsp;
            <p:outputLabel value="#{operadorMB.operadorView.id}" class="strongLabel"/>
            <p:outputLabel value="#{operadorMB.operadorView.apelido}" class="strongLabel"/>
             <p:outputLabel value="ATIVO" rendered="#{operadorMB.operadorView.ativo}" style="font-size: xx-large; color: blue" />
             <p:outputLabel value="DESATIVADO" rendered="#{not operadorMB.operadorView.ativo}" style="font-size: xx-large; color: yellow" />
             <p:outputLabel value="DEMITIDO" rendered="#{operadorMB.operadorView.demitido}" style="font-size: xx-large; color: red" />
            </p:panelGrid> 
         <h:panelGrid columns="1" cellpadding="5">
         <p:outputLabel value="Nome:" class="formLabel" />
         <p:outputLabel value="#{operadorMB.operadorView.nome}" class="strongLabel"/>
         <p:panelGrid columns="2" layout="grid" class="semBorda">
          <p:outputLabel value="Função:" class="formLabel" />         
          <p:outputLabel value="Nível Acesso:" class="formLabel"/>
          <p:outputLabel value="#{operadorMB.operadorView.funcao}" class="strongLabel"/>
          <p:outputLabel value="#{operadorMB.operadorView.nivel}" class="strongLabel"/>
          <p:outputLabel value="Data Admissão:" class="formLabel" />
        <c:choose>
            <c:when test="#{operadorMB.operadorView.ativo}" >&nbsp;</c:when>
            <c:when test="#{operadorMB.operadorView.ativo ne true }" >
                <p:outputLabel value="Data Desativação:" class="formLabel"/></c:when>
        </c:choose>
          <p:outputLabel value="#{operadorMB.operadorView.dtAdmissao}" class="strongLabel">
            <f:convertDateTime pattern="dd/MM/yyyy" /></p:outputLabel>
        <c:choose>
            <c:when test="#{operadorMB.operadorView.ativo}" >&nbsp;</c:when>
            <c:when test="#{operadorMB.operadorView.ativo ne true }" > 
          <p:outputLabel value="#{operadorMB.operadorView.dtDesativacao}" class="strongLabel">
              <f:convertDateTime pattern="dd/MM/yyyy" /></p:outputLabel></c:when>
        </c:choose>
          <p:outputLabel value="Nr. Acessos:" class="formLabel" />
          <p:outputLabel value="Último Acesso:" class="formLabel" />
          <p:outputLabel value="#{operadorMB.operadorView.nrAcessos}" class="strongLabel"/>
          <p:outputLabel value="#{operadorMB.operadorView.dtUltAcesso}" class="strongLabel">
            <f:convertDateTime pattern="dd/MM/yyyy  HH:mm" /></p:outputLabel>
         <p:outputLabel value="Data Nascimento:" class="formLabel" />
         <p:outputLabel value="Sexo:" class="formLabel" />
         <p:outputLabel value="#{operadorMB.operadorView.dtNasc}" class="strongLabel">
         <f:convertDateTime pattern="dd/MM/yyyy" /></p:outputLabel>
         <p:outputLabel value="#{operadorMB.operadorView.sexo}" class="strongLabel"/>        
        </p:panelGrid>
         <p:outputLabel value="e-Mail:" class="formLabel" />
         <p:outputLabel value="#{operadorMB.operadorView.email}" class="strongLabel"/>
         <p:fieldset legend=" Quadros de Avisos " >
         <h:panelGrid columns="2" >
         <oz:booleanLabel label="Pendências De Veículos" valueBoolean="#{operadorMB.operadorView.viewPendenciaVeic}"/>
         <oz:booleanLabel label="Atualizações do Site Loja" valueBoolean="#{operadorMB.operadorView.viewAdmSite}"/>
         <oz:booleanLabel label="Contas à  Pagar" valueBoolean="#{operadorMB.operadorView.viewContasPagar}"/>
         <oz:booleanLabel label="Contas à  Receber" valueBoolean="#{operadorMB.operadorView.viewContasReceber}"/>
         </h:panelGrid>
         </p:fieldset>
         </h:panelGrid>
               <p:commandButton icon="fa fa-pencil Fs16 White" title="Auditoria" styleClass="Fright YellowButton" actionListener="#"  ><f:param name="id" value="#{operadorMB.operadorView.id}" /></p:commandButton>
                <c:if test="#{operadorMB.operadorView.demitido == false}" >
                <p:commandButton icon="fa fa-lock Fs16 White" title="Demitir Operador" styleClass="Fright RedButton" action="#{operadorMB.doDemitir}"
                                 onclick="return confirm('Você Têm Absoluta Certeza Que Deseja DEMITIR Este Operador?');" disabled="#{operadorMB.operadorLogado.id == operadorMB.operadorView.id}" ><f:param name="id" value="#{operadorMB.operadorView.id}" /></p:commandButton>
                <p:commandButton icon="fa fa-pencil Fs16 White" title="Desativar Operador" styleClass="Fright RedButton" action="#{operadorMB.changeAtivo}"
                                 onclick="return confirm('Têm Certeza Que Deseja DESATIVAR Este Operador?');" rendered="#{operadorMB.operadorView.ativo == true}" disabled="#{operadorMB.operadorLogado.id == operadorMB.operadorView.id}" ><f:param name="id" value="#{operadorMB.operadorView.id}" /></p:commandButton>
                <p:commandButton icon="fa fa-pencil Fs16 White" title="Re-Ativar Operador" styleClass="Fright GreenButton" action="#{operadorMB.changeAtivo}"
                                 rendered="#{operadorMB.operadorView.ativo == false}"><f:param name="id" value="#{operadorMB.operadorView.id}" /></p:commandButton>
                <p:commandButton icon="fa fa-unlock Fs16 White" title="Gerar Senha Provisória" styleClass="Fright YellowButton"
                                 onclick="return confirm('Têm Certeza Que Deseja GERAR SENHA PROVISSÓRIA Para Este Operador?');" actionListener="#{doGerarSenhaProvissoria}"  >
                <f:param name="id" value="#{operadorMB.operadorView.id}" /></p:commandButton>
                <p:commandButton icon="fa fa-pencil Fs16 White" title="Editar" styleClass="Fright BlueButton" action="#{operadorMB.doEditar}" >
                    <f:param name="id" value="#{operadorMB.operadorView.id}" />
                     </p:commandButton>
                </c:if>
           </p:panel>
        </p:dialog>
    </ui:define>

</ui:composition>
